%h1 #{@phone.new_record? ? 'Add' : 'Change'} #{@phone.common_name} Phone for #{@user.name}

= error_messages_for :phone

- form_for :phone, @phone do |phone|
  - if @phone.new_record?
    %input{ :type => 'hidden', :name => 'type', :value => params[:type] }
  - if params[:user_id]
    %input{ :type => 'hidden', :name => 'user_id', :value => params[:user_id] }
  - if @phone.is_a?(CustSIPPhone)
    = phone.hidden_field(:password, :value => @phone.password)

  %table
    %tr
      %th Name:
      %td= phone.text_field(:friendly)
    - unless @phone.is_a?(CustSIPPhone)
      %tr
        %th
          - if @phone.is_a?(ProvSIPPhone)
            MAC Address:
          - elsif @phone.is_a?(ExternalPhone)
            Number:
        %td= phone.text_field(:identifier)

  = phone.submit

= link_to 'Remove', { :action => :phone_remove, :id => @phone }, { :confirm => "Remove Phone #{@phone.friendly}" }

%hr
%h2 Instructions
- if @phone.is_a?(ProvSIPPhone)
  %h3 Polycom SoundPoint 501
  %ul
    %li Enter 12 digit MAC Address on back of phone above
    %li Select 'Setup'
    %li Enter Password (default 456)
    %li Select 'Server Menu'
    %li Set 'Server Type' as 'HTTP'
    %li Set 'Server Address' as 'www.mountainofpromos.com/phone/'
- elsif @phone.is_a?(CustSIPPhone)
  - if @phone.new_record?
    %p Any SIP phone should work.  Create Phone then follow instructions.
  - else
    %p Configuration options for any SIP Phone
    %table
      %tr
        %th User Name:
        %td= @phone.username
      %tr
        %th Password:
        %td= @phone.password
      %tr
        %th Proxy/Server:
        %td sip.mountainofpromos.com
- elsif @phone.is_a?(ExternalPhone)
  Number:
    